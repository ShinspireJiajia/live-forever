<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>房屋健檢報告 - 陸府建設 CRM</title>
    
    <!-- Font Awesome 圖示 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- CSS 樣式 -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/breadcrumb.css">
    <link rel="stylesheet" href="css/buttons.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/house-checkup-report.css">
</head>
<body>
    <!-- ============================================ -->
    <!-- 主容器 -->
    <!-- ============================================ -->
    <div class="app-container">
        
        <!-- ============================================ -->
        <!-- 頂部導覽列 (動態渲染) -->
        <!-- ============================================ -->
        <div id="header-container"></div>

        <!-- ============================================ -->
        <!-- 側邊欄選單 -->
        <!-- ============================================ -->
        <div id="sidebar-container"></div>

        <!-- ============================================ -->
        <!-- 主內容區域 -->
        <!-- ============================================ -->
        <main class="main-content">
            <!-- 麵包屑導覽 -->
            <div class="breadcrumb">
                <a href="index.html" class="breadcrumb-item">
                    <i class="fa-solid fa-house"></i>
                    首頁
                </a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-item">房屋健檢</span>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-item active">健檢報告填寫</span>
            </div>

            <div class="content-wrapper">
                <!-- 頁面標題與操作 -->
                <div class="page-header">
                    <h1 class="page-title">房屋健檢報告</h1>
                    <div class="page-actions">
                        <button type="button" class="btn btn-secondary" id="btnBack">
                            <i class="fa-solid fa-arrow-left"></i>
                            返回
                        </button>
                        <button type="button" class="btn btn-info" id="btnSaveDraft">
                            <i class="fa-solid fa-floppy-disk"></i>
                            暫存
                        </button>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- 基本資訊區塊 -->
                <!-- ============================================ -->
                <div class="report-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            <i class="fa-solid fa-info-circle"></i>
                            基本資訊
                        </h3>
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">案場名稱</span>
                            <span class="info-value" id="infoSite">陸府原森</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">戶別</span>
                            <span class="info-value" id="infoUnit">A棟5F</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">住戶姓名</span>
                            <span class="info-value" id="infoName">王大明</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">聯絡電話</span>
                            <span class="info-value" id="infoPhone">0912-345-678</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">健檢日期</span>
                            <span class="info-value" id="infoDate">2025-03-15</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">預約時段</span>
                            <span class="info-value" id="infoTime">09:00 - 10:00</span>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- 外觀結構檢查區塊 -->
                <!-- ============================================ -->
                <div class="report-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            <i class="fa-solid fa-building"></i>
                            外觀結構檢查
                        </h3>
                    </div>
                    <table class="check-table">
                        <thead>
                            <tr>
                                <th width="20%">檢查項目</th>
                                <th width="15%">檢查狀態</th>
                                <th width="25%">修繕照片</th>
                                <th width="25%">說明</th>
                                <th width="15%">建議再維養</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-item="exterior-wall">
                                <td>外牆磁磚</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="exterior-wall-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="exterior-wall-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('exterior-wall')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="exterior-wall-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="exterior-wall-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="exterior-wall-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="exterior-wall-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="exterior-wall-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr data-item="window-frame">
                                <td>窗框密封</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="window-frame-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="window-frame-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('window-frame')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="window-frame-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="window-frame-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="window-frame-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="window-frame-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="window-frame-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr data-item="balcony">
                                <td>陽台防水</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="balcony-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="balcony-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('balcony')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="balcony-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="balcony-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="balcony-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="balcony-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="balcony-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ============================================ -->
                <!-- 室內空間檢查區塊 -->
                <!-- ============================================ -->
                <div class="report-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            <i class="fa-solid fa-couch"></i>
                            室內空間檢查
                        </h3>
                    </div>
                    <table class="check-table">
                        <thead>
                            <tr>
                                <th width="20%">檢查項目</th>
                                <th width="15%">檢查狀態</th>
                                <th width="25%">修繕照片</th>
                                <th width="25%">說明</th>
                                <th width="15%">建議再維養</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-item="ceiling">
                                <td>天花板/牆壁</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="ceiling-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="ceiling-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('ceiling')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="ceiling-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="ceiling-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="ceiling-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="ceiling-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="ceiling-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr data-item="floor">
                                <td>地板</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="floor-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="floor-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('floor')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="floor-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="floor-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="floor-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="floor-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="floor-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr data-item="door">
                                <td>門窗五金</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="door-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="door-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('door')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="door-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="door-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="door-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="door-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="door-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ============================================ -->
                <!-- 水電系統檢查區塊 -->
                <!-- ============================================ -->
                <div class="report-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            <i class="fa-solid fa-bolt"></i>
                            水電系統檢查
                        </h3>
                    </div>
                    <table class="check-table">
                        <thead>
                            <tr>
                                <th width="20%">檢查項目</th>
                                <th width="15%">檢查狀態</th>
                                <th width="25%">修繕照片</th>
                                <th width="25%">說明</th>
                                <th width="15%">建議再維養</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-item="electrical">
                                <td>電源箱/插座</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="electrical-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="electrical-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('electrical')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="electrical-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="electrical-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="electrical-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="electrical-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="electrical-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr data-item="plumbing">
                                <td>給排水管線</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="plumbing-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="plumbing-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('plumbing')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="plumbing-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="plumbing-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="plumbing-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="plumbing-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="plumbing-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr data-item="bathroom">
                                <td>衛浴設備</td>
                                <td>
                                    <div class="status-options">
                                        <label class="status-option">
                                            <input type="radio" name="bathroom-status" value="正常"> 正常
                                        </label>
                                        <label class="status-option">
                                            <input type="radio" name="bathroom-status" value="異常"> 異常
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <div class="photo-upload">
                                        <button type="button" class="photo-btn" onclick="triggerPhotoUpload('bathroom')">
                                            <i class="fa-solid fa-camera"></i> 上傳照片
                                        </button>
                                        <input type="file" id="bathroom-photo" accept="image/*" hidden multiple>
                                        <div class="photo-preview-list" id="bathroom-preview"></div>
                                    </div>
                                </td>
                                <td>
                                    <textarea class="form-textarea" id="bathroom-notes" placeholder="請輸入說明..."></textarea>
                                </td>
                                <td>
                                    <div class="maintain-options">
                                        <label class="radio-item">
                                            <input type="radio" name="bathroom-maintain" value="是"> 是
                                        </label>
                                        <label class="radio-item">
                                            <input type="radio" name="bathroom-maintain" value="否"> 否
                                        </label>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ============================================ -->
                <!-- 總結與建議區塊 -->
                <!-- ============================================ -->
                <div class="report-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            <i class="fa-solid fa-clipboard-list"></i>
                            總結與建議
                        </h3>
                    </div>
                    <div class="form-group">
                        <label class="form-label">健檢總結</label>
                        <div class="quick-tags" style="margin-bottom: 10px;">
                             <button type="button" class="btn btn-sm btn-secondary" style="margin-right: 5px; margin-bottom: 5px;" onclick="addSummaryText('房屋結構狀況良好')">房屋結構狀況良好</button>
                             <button type="button" class="btn btn-sm btn-secondary" style="margin-right: 5px; margin-bottom: 5px;" onclick="addSummaryText('部分設施需加強維護')">部分設施需加強維護</button>
                             <button type="button" class="btn btn-sm btn-secondary" style="margin-right: 5px; margin-bottom: 5px;" onclick="addSummaryText('正常使用無異狀')">正常使用無異狀</button>
                             <button type="button" class="btn btn-sm btn-secondary" style="margin-right: 5px; margin-bottom: 5px;" onclick="addSummaryText('建議定期清潔保養')">建議定期清潔保養</button>
                        </div>
                        <textarea class="form-textarea" id="summaryNotes" rows="4" placeholder="請輸入健檢總結說明..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">維護建議</label>
                        <textarea class="form-textarea" id="maintenanceSuggestion" rows="4" placeholder="請輸入後續維護建議..."></textarea>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- 簽名區塊 -->
                <!-- ============================================ -->
                <div class="report-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            <i class="fa-solid fa-signature"></i>
                            住戶簽名確認 (選填)
                        </h3>
                    </div>
                    
                    <div class="signature-block" id="signatureBlock">
                        <div class="signature-area" id="signatureArea">
                            <canvas id="signatureCanvas"></canvas>
                            <div class="signature-placeholder" id="signaturePlaceholder">
                                <i class="fa-solid fa-signature"></i>
                                <span>點擊此處進行簽名</span>
                            </div>
                        </div>
                        <div class="signature-buttons">
                            <button type="button" class="btn btn-secondary" id="btnClearSign">
                                <i class="fa-solid fa-eraser"></i> 清除簽名
                            </button>
                            <button type="button" class="btn btn-primary" id="btnConfirmSign">
                                <i class="fa-solid fa-check"></i> 確認簽名
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- 完成區塊 -->
                <!-- ============================================ -->
                <div class="report-section">
                    <div class="complete-actions">
                        <button type="button" class="btn btn-success btn-lg" id="btnComplete">
                            <i class="fa-solid fa-check-double"></i>
                            完成報告並提交
                        </button>
                        <p class="complete-hint">
                            提交後將生成報告附件，住戶可於預約紀錄中下載
                        </p>
                    </div>
                </div>

                <!-- ============================================ -->
                <!-- 附件下載區塊（完成後顯示） -->
                <!-- ============================================ -->
                <div class="report-section download-section" id="downloadSection" style="display: none;">
                    <div class="section-header">
                        <h3 class="section-title">
                            <i class="fa-solid fa-file-pdf"></i>
                            報告附件
                        </h3>
                    </div>
                    <div class="download-content">
                        <div class="download-file">
                            <i class="fa-solid fa-file-pdf file-icon"></i>
                            <div class="file-info">
                                <span class="file-name" id="downloadFileName">房屋健檢報告_A棟5F_20250315.pdf</span>
                                <span class="file-meta">生成時間：<span id="downloadFileDate"></span></span>
                            </div>
                            <a href="#" class="btn btn-info" id="btnDownload">
                                <i class="fa-solid fa-download"></i> 下載
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script src="js/menu-component.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/house-checkup-report.js"></script>
</body>
</html>
