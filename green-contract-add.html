<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新增合約 - 綠海養護 - 陸府建設 CRM</title>
    
    <!-- Font Awesome 圖示 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- CSS 樣式 -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/breadcrumb.css">
    <link rel="stylesheet" href="css/buttons.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/green-contract-add.css">
</head>
<body>
    <!-- ============================================ -->
    <!-- 主容器 -->
    <!-- ============================================ -->
    <div class="app-container">
        
        <!-- ============================================ -->
        <!-- 頂部導覽列 (動態渲染) -->
        <!-- ============================================ -->
        <div id="header-container"></div>

        <!-- ============================================ -->
        <!-- 側邊欄選單 (動態渲染) -->
        <!-- ============================================ -->
        <div id="sidebar-container"></div>

        <!-- ============================================ -->
        <!-- 主內容區域 -->
        <!-- ============================================ -->
        <main class="main-content">
            <!-- 麵包屑導覽 -->
            <div class="breadcrumb">
                <a href="index.html" class="breadcrumb-item">
                    <i class="fa-solid fa-house"></i>
                    首頁
                </a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-item">綠海養護</span>
                <span class="breadcrumb-separator">/</span>
                <a href="green-contract.html" class="breadcrumb-item">養護合約</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-item active">新增合約</span>
            </div>

            <!-- 頁面內容 -->
            <div class="content-wrapper">
                <div class="page-header">
                    <h1 class="page-title">新增合約</h1>
                </div>

                <!-- 合約類型 -->
                <div class="form-group">
                    <label class="form-label required">合約類型</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="contract-type" value="專戶" checked> 專戶
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="contract-type" value="公設"> 公設
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="contract-type" value="專戶與公設"> 專戶與公設
                        </label>
                    </div>
                </div>

                <!-- 合約編號 -->
                <div class="form-group">
                    <label class="form-label">合約編號</label>
                    <input type="text" class="form-control" placeholder="自動生成或手動輸入">
                </div>

                <!-- 年度 -->
                <div class="form-group">
                    <label class="form-label">年度</label>
                    <select class="form-control" id="contractYear">
                        <option value="">請選擇年度</option>
                        <option value="2024">2024年</option>
                        <option value="2025">2025年</option>
                        <option value="2026">2026年</option>
                    </select>
                </div>

                <!-- 合約期間 -->
                <div class="form-group">
                    <label class="form-label">合約期間</label>
                    <div class="contract-period">
                        <input type="date" class="form-control"> 至 <input type="date" class="form-control">
                    </div>
                </div>

                <!-- 合約狀態 (新增) -->
                <div class="form-group">
                    <label class="form-label required">合約狀態</label>
                    <select class="form-control" id="contractStatus">
                        <option value="待簽署">待簽署</option>
                        <option value="已生效">已生效</option>
                        <option value="已失效">已失效</option>
                        <option value="作廢">作廢</option>
                    </select>
                </div>

                <!-- 合約通知對象 (改為挑選方式) -->
                <div class="form-group">
                    <label class="form-label">合約通知對象(簽署與繳款)</label>
                    <div class="select-contacts">
                        <button class="select-contacts-btn"
                            onclick="document.getElementById('contactsModal').classList.add('active')">選擇通知對象</button>
                        <span class="selected-count">已選擇 0 個通知對象</span>
                    </div>
                </div>

                <!-- 維護人員 -->
                <div class="form-group">
                    <label class="form-label">維護人員</label>
                    <select class="form-control" id="contractStaff">
                        <option value="">請選擇維護人員</option>
                        <option value="王小明">王小明</option>
                        <option value="陳大華">陳大華</option>
                        <option value="林志強">林志強</option>
                        <option value="張美玲">張美玲</option>
                        <option value="李建國">李建國</option>
                    </select>
                </div>

                <!-- 合約摘要 -->
                <div class="form-group">
                    <label class="form-label required">合約摘要</label>
                    <textarea class="form-control" rows="4" placeholder="請輸入合約摘要內容"></textarea>
                </div>

                <!-- 費用 -->
                <div class="form-group">
                    <label class="form-label required">費用</label>
                    <input type="text" class="form-control" placeholder="請輸入費用金額" value="100000">
                </div>

                <!-- 最大預約次數 (移至費用之後) -->
                <div class="form-group">
                    <label class="form-label">最大預約次數 (總次數或每月次數)</label>
                    <input type="number" class="form-control" placeholder="請輸入數字" value="10">
                </div>

                <!-- 可預約月份 -->
                <div class="form-group">
                    <label class="form-label">可預約月份</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="1"> 1月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="2"> 2月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="3"> 3月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="4"> 4月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="5"> 5月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="6"> 6月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="7"> 7月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="8"> 8月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="9"> 9月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="10"> 10月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="11"> 11月
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="month" value="12"> 12月
                        </label>
                    </div>
                </div>

                <!-- 公設範圍 -->
                <div class="form-group">
                    <label class="form-label">公設範圍</label>
                    <input type="text" class="form-control" placeholder="請輸入公設範圍">
                </div>

                <!-- 適用戶別 -->
                <div class="form-group">
                    <label class="form-label">適用戶別</label>
                    <div class="select-households">
                        <button class="select-households-btn"
                            onclick="document.getElementById('householdModal').classList.add('active')">選擇適用戶別</button>
                        <span class="selected-count">已選擇 0 個戶別</span>
                    </div>
                </div>

                <!-- 合約檔案 -->
                <div class="form-group">
                    <label class="form-label required">合約檔案</label>
                    <div>
                        <input type="file" id="contractFile" class="hidden-file-input" accept=".pdf">
                        <button class="upload-btn" onclick="document.getElementById('contractFile').click()">選擇PDF檔案</button>
                        <div class="file-info">單一檔案PDF檔案，檔案大小小於10MB</div>
                        <div id="contractFileDisplay" class="uploaded-file" style="display: none;">
                            <span class="file-icon">📄</span>
                            <span class="file-name">contract.pdf</span>
                            <button class="download-file-btn">下載</button>
                        </div>
                    </div>
                </div>

                <!-- 檢查項目 -->
                <div class="form-group">
                    <label class="form-label">檢查項目</label>
                    <div>
                        <input type="file" id="inspectionFile" class="hidden-file-input">
                        <button class="upload-btn" onclick="document.getElementById('inspectionFile').click()">上傳檢查項目檔案</button>
                        <div class="file-info">支援多種檔案格式，檔案大小小於10MB</div>
                        <div id="inspectionFileDisplay" class="uploaded-file" style="display: none;">
                            <span class="file-icon">📄</span>
                            <span class="file-name">inspection_items.xlsx</span>
                            <button class="download-file-btn">下載</button>
                        </div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-cancel" onclick="window.location.href='green-contract.html'">取消</button>
                    <button class="btn btn-submit">新增合約</button>
                </div>
            </div>
        </main>
    </div>

    <!-- 適用戶別選擇彈窗 -->
    <div class="modal" id="householdModal" onclick="if(event.target === this) this.classList.remove('active')">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">適用戶別</h3>
                <button class="modal-close"
                    onclick="document.getElementById('householdModal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="受惠戶別 (如: A101, B2...)">
                    <button class="search-btn">搜尋</button>
                </div>

                <div class="filter-options">
                    <label class="filter-option">
                        <input type="radio" name="filter" value="all" checked> 全選
                    </label>
                    <label class="filter-option">
                        <input type="radio" name="filter" value="selected"> 選擇
                    </label>
                    <div class="pagination-info">已勾人數：24 個戶別 | 已選：0 個</div>
                </div>

                <div class="modal-subtitle">尚未選擇戶別</div>

                <div class="room-grid">
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-101">
                        <label for="room-t1-101">T1-101</label>
                    </div>
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-102">
                        <label for="room-t1-102">T1-102</label>
                    </div>
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-103">
                        <label for="room-t1-103">T1-103</label>
                    </div>
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-104">
                        <label for="room-t1-104">T1-104</label>
                    </div>
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-105">
                        <label for="room-t1-105">T1-105</label>
                    </div>
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-106">
                        <label for="room-t1-106">T1-106</label>
                    </div>
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-201">
                        <label for="room-t1-201">T1-201</label>
                    </div>
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-202">
                        <label for="room-t1-202">T1-202</label>
                    </div>
                    <div class="room-item">
                        <input type="checkbox" id="room-t1-203">
                        <label for="room-t1-203">T1-203</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel"
                    onclick="document.getElementById('householdModal').classList.remove('active')">取消</button>
                <button class="btn btn-submit"
                    onclick="document.getElementById('householdModal').classList.remove('active')">確認</button>
            </div>
        </div>
    </div>

    <!-- 主要通知對象選擇彈窗 -->
    <div class="modal" id="contactsModal" onclick="if(event.target === this) this.classList.remove('active')">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">選擇主要通知對象</h3>
                <button class="modal-close"
                    onclick="document.getElementById('contactsModal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="搜尋會員 (姓名)">
                    <button class="search-btn">搜尋</button>
                </div>

                <div class="filter-options">
                    <label class="filter-option">
                        <input type="radio" name="contact-filter" value="all" checked> 全部
                    </label>
                    <label class="filter-option">
                        <input type="radio" name="contact-filter" value="resident"> 住戶
                    </label>
                    <label class="filter-option">
                        <input type="radio" name="contact-filter" value="property"> 物業
                    </label>

                    <div class="pagination-info">已選：0 個通知對象</div>
                </div>

                <div class="modal-subtitle">會員列表</div>

                <div class="member-grid">
                    <div class="member-item">
                        <input type="checkbox" id="member-1">
                        <div class="member-info">
                            <span class="member-name">王小明</span>
                            <span class="member-role"><span class="tag">住戶</span> T1-101</span>
                        </div>
                    </div>
                    <div class="member-item">
                        <input type="checkbox" id="member-2">
                        <div class="member-info">
                            <span class="member-name">陳大華</span>
                            <span class="member-role"><span class="tag">住戶</span> T1-102</span>
                        </div>
                    </div>
                    <div class="member-item">
                        <input type="checkbox" id="member-3">
                        <div class="member-info">
                            <span class="member-name">林志強</span>
                            <span class="member-role"><span class="tag">住戶</span> T1-103</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel"
                    onclick="document.getElementById('contactsModal').classList.remove('active')">取消</button>
                <button class="btn btn-submit"
                    onclick="document.getElementById('contactsModal').classList.remove('active')">確認</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/menu-component.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/pagination.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/green-contract-add.js"></script>
</body>
</html>
